<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sch.hunnu.dao.chatDao">
  
    <select id="selectListByACC" resultType="peoList">
        select  sender as acc from prichat where receiver=#{myAcc} union
         select  receiver as acc from prichat where sender=#{myAcc} 
    </select>
     
    <select id="selectUserByAccs" resultType="user">
        select acc,nick,pic from user where acc in
        <foreach collection="list" item="ls" open="(" separator="," close=")">
            #{ls.acc}
        </foreach>
    </select>
    
    <select id="selectNoteBy2Acc" resultType="priChat">
        select senderNick,content,time from prichat where 
        (sender=#{me} and receiver=#{other}) or (sender=#{other} and receiver=#{me}) ORDER BY id 
    </select>
    
    <select id="selectUserByInfo" resultType="int">
        select count(*) from user where acc=#{acc} and pw=#{pw} 
    </select>
    
     <select id="selectUserByAcc" resultType="user">
        select acc,nick,pic from user where acc=#{acc} 
    </select>
    
    <insert id="insertIntoPriChat" parameterType="priSend" >
		insert into prichat values(0,#{pri.sender},#{pri.receiver},#{pri.senderNick},#{pri.content},#{pri.time})     
    </insert>
</mapper>